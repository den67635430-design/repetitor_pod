import { Message } from "./types";

// Demo AI responses - In production, this should call a backend API endpoint
// that securely handles the Gemini API key server-side

const DEMO_RESPONSES: Record<string, string[]> = {
  '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞': [
    '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ –ø–æ—à–∞–≥–æ–≤–æ. –ß—Ç–æ —É –Ω–∞—Å –¥–∞–Ω–æ –≤ —É—Å–ª–æ–≤–∏–∏? üìê',
    '–•–æ—Ä–æ—à–æ! –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è... –ö–∞–∫—É—é —Ñ–æ—Ä–º—É–ª—É –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?',
    '–î–∞–≤–∞–π –ø–æ–¥—É–º–∞–µ–º –≤–º–µ—Å—Ç–µ! –ß—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ —ç—Ç–æ–π –∑–∞–¥–∞—á–µ? ü§î'
  ],
  '–†—É—Å—Å–∫–∏–π': [
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –ª–µ–≥–∫–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å. –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø—Ä–∏–º–µ—Ä—ã. üìñ',
    '–û—Ç–ª–∏—á–Ω–æ! –ü–æ–ø—Ä–æ–±—É–µ–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å —ç—Ç–æ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö. –°–æ—Å—Ç–∞–≤—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ!',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –≠—Ç—É —Ç–µ–º—É –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å, –µ—Å–ª–∏ –∑–Ω–∞—Ç—å –æ–¥–∏–Ω —Å–µ–∫—Ä–µ—Ç...'
  ],
  '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π': [
    'Great question! Let me explain this in a simple way... üá¨üáß',
    'Good! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö.',
    'Excellent! This is an important topic. Let\'s practice together!'
  ],
  '–§–∏–∑–∏–∫–∞': [
    '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ —Ñ–∏–∑–∏–∫–µ! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ —è–≤–ª–µ–Ω–∏–µ. ‚ö°',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –ö–∞–∫–∏–µ –∑–∞–∫–æ–Ω—ã —Ñ–∏–∑–∏–∫–∏ –∑–¥–µ—Å—å –ø—Ä–∏–º–µ–Ω–∏–º—ã?',
    '–î–∞–≤–∞–π –ø–æ–¥—É–º–∞–µ–º, –∫–∞–∫–∏–µ —Å–∏–ª—ã –¥–µ–π—Å—Ç–≤—É—é—Ç –≤ —ç—Ç–æ–π –∑–∞–¥–∞—á–µ? üî¨'
  ],
  '–•–∏–º–∏—è': [
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç—É —Ä–µ–∞–∫—Ü–∏—é. üß™',
    '–û—Ç–ª–∏—á–Ω–æ! –ö–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É—á–∞—Å—Ç–≤—É—é—Ç? –°–æ—Å—Ç–∞–≤–∏–º —É—Ä–∞–≤–Ω–µ–Ω–∏–µ!',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∑–∞–¥–∞—á–∞! –í—Å–ø–æ–º–Ω–∏–º —Ç–∞–±–ª–∏—Ü—É –ú–µ–Ω–¥–µ–ª–µ–µ–≤–∞...'
  ],
  '–ë–∏–æ–ª–æ–≥–∏—è': [
    '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ –±–∏–æ–ª–æ–≥–∏–∏! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è. üß¨',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –∫–ª–µ—Ç–æ—á–Ω—ã–º —Å—Ç—Ä–æ–µ–Ω–∏–µ–º...',
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —ç—Ç–æ —è–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.'
  ],
  '–ò—Å—Ç–æ—Ä–∏—è': [
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π –≤—Å–ø–æ–º–Ω–∏–º —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥. üèõÔ∏è',
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –ö–∞–∫–∏–µ —Å–æ–±—ã—Ç–∏—è —ç—Ç–æ–º—É –ø—Ä–µ–¥—à–µ—Å—Ç–≤–æ–≤–∞–ª–∏?',
    '–û—Ç–ª–∏—á–Ω–æ! –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç...'
  ],
  '–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞': [
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ. üìö',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –ß—Ç–æ –∞–≤—Ç–æ—Ä —Ö–æ—Ç–µ–ª —Å–∫–∞–∑–∞—Ç—å —ç—Ç–∏–º?',
    '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ–±—Ä–∞–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è...'
  ],
  '–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π': [
    'Tr√®s bien! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ. üá´üá∑',
    'Bon! –ü–æ–ø—Ä–æ–±—É–µ–º –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö...',
    'Excellent! –≠—Ç–æ –≤–∞–∂–Ω–∞—è —Ç–µ–º–∞ –≤ –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ!'
  ]
};

const DEFAULT_RESPONSES = [
  '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è –≤–º–µ—Å—Ç–µ. üòä',
  '–•–æ—Ä–æ—à–æ! –≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–µ–º–∞. –ù–∞—á–Ω—ë–º —Å –æ—Å–Ω–æ–≤.',
  '–ü–æ–Ω—è–ª! –°–µ–π—á–∞—Å –æ–±—ä—è—Å–Ω—é –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º. ‚ú®',
  '–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π –ø–æ–¥—É–º–∞–µ–º –Ω–∞–¥ —ç—Ç–∏–º –≤–º–µ—Å—Ç–µ.',
  '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –ü–æ–ø—Ä–æ–±—É–µ–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –ø–æ—à–∞–≥–æ–≤–æ.'
];

export const getTutorResponse = async (history: Message[], subject?: string): Promise<string> => {
  // Simulate network delay for realistic demo experience
  await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 700));

  // Get responses for the selected subject or use default
  const responses = subject && DEMO_RESPONSES[subject] 
    ? DEMO_RESPONSES[subject] 
    : DEFAULT_RESPONSES;

  // Return a random response
  const randomIndex = Math.floor(Math.random() * responses.length);
  
  // Add a note about demo mode
  const demoNote = '\n\n_üí° –≠—Ç–æ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è. –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–æ–¥–∫–ª—é—á–∏—Ç–µ Lovable Cloud._';
  
  return responses[randomIndex] + demoNote;
};
